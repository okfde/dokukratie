name: dip
description: Dokumentations- und Informationssystem für Parlamentsmaterialien - API

document_types:
  minor_interpellation: Kleine Anfrage
  major_interpellation: Große Anfrage

publisher:
  type: parliament
  name: Deutscher Bundestag
  url: https://dip.bundestag.de/
  jurisdiction:
    id: de
    name: Deutschland

pipeline:
  init:
    method: dokukratie.operations:init
    params:
      url: https://search.dip.bundestag.de/api/v1/drucksache
      document_types:
        - minor_interpellation
      legislative_terms: 19
      urlparams:
        apikey: GmEPb1B.bfqJLIhcGAsH9fTJevTglhFpCoZyAAAdhp
        f.zuordnung: BT
      param_names:
        start_date: f.datum.start
        end_date: f.datum.end
    handle:
      pass: fetch

  fetch:
    method: memorious_extended.operations:fetch
    params:
      test_runs: 3
    handle:
      pass: parse

  parse:
    method: dokukratie.scrapers.dip:parse
    params:
      skip_incremental: True
      test_runs: 3
    handle:
      cursor: fetch
      download: download
      fetch_reference: fetch_reference

  # if is_answer
  fetch_reference:
    method: memorious_extended.operations:fetch
    handle:
      pass: parse_reference

  parse_reference:
    method: dokukratie.scrapers.dip:parse_reference
    handle:
      pass: download

  download:
    method: memorious_extended.operations:fetch
    handle:
      pass: clean

  clean:
    method: dokukratie.operations:clean
    handle:
      pass: store

  store:
    method: memorious_extended.operations:store
